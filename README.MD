# Dokumentacja API CPUtopia

## ğŸš€ Przygotowanie i uruchomienie Å›rodowiska
1. **Sklonuj repozytorium**
   ```bash
   git clone https://github.com/Inexpli/CPUtopia.git
   cd CPUtopia/backend
   ```
2. **Skopiuj i skonfiguruj plik Å›rodowiskowy**
   ```bash
   cp .env .env.local
   # Edytuj .env.local: ustaw DATABASE_URL, SECRET
   ```
3. **Zainstaluj zaleÅ¼noÅ›ci PHP**
   ```bash
   composer install
   ```
4. **Zbuduj i uruchom kontenery Docker** (jeÅ›li uÅ¼ywasz Docker Compose):
   ```bash
   docker-compose up -d
   docker-compose exec php php bin/console doctrine:database:create
   docker-compose exec php php bin/console doctrine:migrations:migrate
   ```
5. **SprawdÅº dziaÅ‚anie**
   - Backend dostÄ™pny pod: `http://localhost:8080`
   - Testuj endpointy zgodnie z dokumentacjÄ… poniÅ¼ej.

---

# Dokumentacja API CPUtopia

PoniÅ¼ej znajduje siÄ™ peÅ‚na dokumentacja endpointÃ³w dostÄ™pnych w backendzie aplikacji CPUtopia. Tester powinien korzystaÄ‡ z poniÅ¼szych informacji, aby poprawnie wykonywaÄ‡ Å¼Ä…dania i oceniaÄ‡ odpowiedzi.

---

## ğŸ›’ CART (Koszyk)

### 1. Dodaj produkt do koszyka
**POST** `/api/cart/add/{id}`

- **Opis**: Dodaje produkt o podanym ID do koszyka (sesyjnego lub uÅ¼ytkownika).
- **Parametry URL**:
  - `id` (integer) â€“ ID produktu.
- **Body (JSON)** *(opcjonalnie)*:
  ```json
  {
    "quantity": 2  // liczba sztuk, domyÅ›lnie 1
  }
  ```
- **OdpowiedÅº**:
  - `200 OK`
    ```json
    { "message": "Product added to cart" }
    ```

### 2. WyÅ›wietl zawartoÅ›Ä‡ koszyka
**GET** `/api/cart`

- **Opis**: Zwraca listÄ™ produktÃ³w znajdujÄ…cych siÄ™ w koszyku.
- **OdpowiedÅº**:
  - `200 OK` â€“ tablica pozycji z informacjami:
    ```json
    [
      {
        "product": { /* dane produktu */ },
        "quantity": 2,
        "total": 199.98
      },
      ...
    ]
    ```

### 3. UsuÅ„ produkt z koszyka
**POST** `/api/cart/remove/{id}`

- **Opis**: Usuwa produkt o danym ID z koszyka.
- **Parametry URL**:
  - `id` (integer) â€“ ID produktu.
- **OdpowiedÅº**:
  - `200 OK`  
    ```json
    { "message": "Product removed from cart" }
    ```
  - `404 Not Found`  
    ```json
    { "error": "Product not found in cart" }
    ```

### 4. WyczyÅ›Ä‡ koszyk
**POST** `/api/cart/clear`

- **Opis**: Usuwa wszystkie produkty z koszyka.
- **OdpowiedÅº**:
  - `200 OK`
    ```json
    { "message": "Cart cleared" }
    ```

---

## ğŸ·ï¸ CATEGORY (Kategorie)

Wszystkie operacje CRUD na kategoriach wymagajÄ… roli **ADMIN**.

### 1. Lista kategorii
**GET** `/api/category`

- **Opis**: Pobiera wszystkie dostÄ™pne kategorie.
- **OdpowiedÅº**:
  - `200 OK` â€“ tablica obiektÃ³w kategorii.

### 2. Dodaj kategoriÄ™
**POST** `/api/category/add`

- **Uprawnienia**: `ROLE_ADMIN`
- **Body (JSON)**:
  ```json
  {
    "name": "Nazwa kategorii"
  }
  ```
- **OdpowiedÅº**:
  - `201 Created`  
    ```json
    { "message": "Category added successfully" }
    ```
  - `400 Bad Request` â€“ walidacja lub niepoprawny JSON

### 3. Edytuj kategoriÄ™
**PUT / PATCH** `/api/category/{id}`

- **Uprawnienia**: `ROLE_ADMIN`
- **Parametry URL**:
  - `id` (integer) â€“ ID kategorii.
- **Body (JSON)**: dowolne z pÃ³l, np.:
  ```json
  { "name": "Nowa nazwa" }
  ```
- **OdpowiedÅº**:
  - `200 OK`  
    ```json
    { "message": "Category updated successfully" }
    ```
  - `404 Not Found` / `400 Bad Request`

### 4. UsuÅ„ kategoriÄ™
**DELETE** `/api/category/{id}`

- **Uprawnienia**: `ROLE_ADMIN`
- **Parametry URL**:
  - `id` (integer)
- **OdpowiedÅº**:
  - `200 OK`  
    ```json
    { "message": "Category deleted successfully" }
    ```
  - `404 Not Found`

---

## ğŸ“¦ PRODUCT (Produkty)

Operacje modyfikacji (`add`, `edit`, `delete`) wymagajÄ… roli **ADMIN**.

### 1. Lista produktÃ³w
**GET** `/api/product`

- **Opis**: Pobiera wszystkie produkty.
- **OdpowiedÅº**:
  - `200 OK` â€“ tablica produktÃ³w.

### 2. SzczegÃ³Å‚y produktu
**GET** `/api/product/{id}`

- **Parametry URL**:
  - `id` (integer)
- **OdpowiedÅº**:
  - `200 OK` â€“ obiekt produktu
  - `404 Not Found`

### 3. Dodaj produkt
**POST** `/api/product/add`

- **Uprawnienia**: `ROLE_ADMIN`
- **Body (JSON)**:
  ```json
  {
    "name": "Laptop",
    "description": "Opis",
    "price": "1550.60",
    "stock": 10,
    "category_id": 1,
    "image": file
  }
  ```
- **OdpowiedÅº**:
  - `201 Created`  
    ```json
    { "message": "Product added successfully" }
    ```
  - `400 Bad Request`

### 4. Edytuj produkt
**PUT / PATCH** `/api/product/{id}`

- **Uprawnienia**: `ROLE_ADMIN`
- **Parametry URL**:
  - `id` (integer)
- **Body (JSON)**: wszystkie pola lub ich podzbiÃ³r
- **OdpowiedÅº**:
  - `200 OK`  
    ```json
    { "message": "Product updated successfully" }
    ```
  - `404 Not Found` / `400 Bad Request`

### 5. UsuÅ„ produkt
**DELETE** `/api/product/{id}`

- **Uprawnienia**: `ROLE_ADMIN`
- **Parametry URL**:
  - `id` (integer)
- **OdpowiedÅº**:
  - `200 OK`  
    ```json
    { "message": "Product deleted successfully" }
    ```
  - `404 Not Found`

---

## ğŸ“„ ORDER (ZamÃ³wienia)

### 1. Lista zamÃ³wieÅ„ uÅ¼ytkownika
**GET** `/api/order/`

- **Opis**: Pobiera historiÄ™ zamÃ³wieÅ„ zalogowanego uÅ¼ytkownika.
- **OdpowiedÅº**:
  - `200 OK` â€“ tablica zamÃ³wieÅ„

### 2. UtwÃ³rz zamÃ³wienie
**POST** `/api/order/create`

- **Opis**: Tworzy zamÃ³wienie na podstawie aktualnego koszyka.
- **OdpowiedÅº**:
  - `200 OK` â€“ obiekt nowego zamÃ³wienia
  - `400 Bad Request` â€“ np. pusty koszyk

---

## ğŸ“‹ ORDER ITEMS (Pozycje zamÃ³wienia)

### 1. Lista pozycji zamÃ³wieÅ„
**GET** `/api/orderItem`

- **Uprawnienia**: `ROLE_ADMIN`
- **Opis**: Zwraca wszystkie pozycje zamÃ³wieÅ„ w systemie.
- **OdpowiedÅº**:
  - `200 OK` â€“ tablica obiektÃ³w `OrderItem`

---

## ğŸ‘¤ USER (UÅ¼ytkownicy)

### 1. Rejestracja
**POST** `/api/user/register`

- **Body (JSON)**:
  ```json
  {
    "email": "jan@kowalski.pl",
    "password": "haslo123"
  }
  ```
- **OdpowiedÅº**:
  - `201 Created`
  - `400 Bad Request`

### 2. Logowanie
**POST** `/api/user/login`

- **Body (JSON)**:
  ```json
  {
    "email": "jan@kowalski.pl",
    "password": "haslo123"
  }
  ```
- **OdpowiedÅº**:
  - `200 OK` â€“ komunikat o sukcesie
  - `400/401` â€“ niepoprawne dane

### 3. Aktualnie zalogowany uÅ¼ytkownik
**GET** `/api/user/me`

- **Opis**: Zwraca dane bieÅ¼Ä…cego uÅ¼ytkownika.
- **OdpowiedÅº**:
  - `200 OK`
  - `401 Unauthorized`

### 4. Lista uÅ¼ytkownikÃ³w
**GET** `/api/user/`

- **Uprawnienia**: `ROLE_ADMIN`
- **Opis**: Zwraca wszystkich uÅ¼ytkownikÃ³w.
- **OdpowiedÅº**:
  - `200 OK`

### 5. Promuj na admina
**PATCH** `/api/user/promote/{id}`

- **Uprawnienia**: `ROLE_ADMIN`
- **Parametry URL**:
  - `id` (integer)
- **OdpowiedÅº**:
  - `200 OK`
  - `404 Not Found`

---

> **Uwaga**: Wszystkie Å¼Ä…dania wymagajÄ… nagÅ‚Ã³wka `Content-Type: application/json`.

